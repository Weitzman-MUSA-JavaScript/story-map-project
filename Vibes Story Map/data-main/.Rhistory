geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "medHHinc"),name= 'Median Household Income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Household Income across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
multiples <- alltracts.Summary %>%
gather(Variable, Value, -year, -TOD)
tod<- alltracts.group %>% filter(TOD=='TOD', year==2012) %>% st_union() %>% as.data.frame() %>% mutate(year=2012, TOD='TOD') %>% rbind(
alltracts.group %>% filter(TOD=='TOD', year==2022) %>% st_union()%>% as.data.frame() %>% mutate(year=2022,TOD='TOD')) %>% st_sf()
rent_facet_plot <- multiples%>% filter(Variable== 'Median_rent') %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
# labs(title = "Median Rent across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
rent_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medcontractrent)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "medcontractrent"),name= 'Median Contract Rent')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Rent across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
rent_facet_map
library(gridExtra)
grid.arrange(rent_facet_map, rent_facet_plot,
top = "Median Rent across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_plot <- multiples%>% filter(Variable== 'Percentage_households_below_poverty_line'
) %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(percpoorHH)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "percpoorHH"),name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
qBr(alltracts.group, "percpoorHH")
alltracts.group <-
rbind(
st_centroid(alltracts)[buffer,] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "TOD"),
st_centroid(alltracts)[buffer, op = st_disjoint] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "Non-TOD")) %>%
mutate(MedRent.inf = ifelse(year == "2012", medcontractrent * 1.31,medcontractrent),
MedHHinc.inf = ifelse(year == "2012", medHHinc * 1.31,medHHinc ),
agg_cont_rent.inf= ifelse(year == "2012", agg_cont_rent * 1.31,agg_cont_rent)) %>%
mutate_all(~ifelse(is.nan(.), NA, .))
alltracts.group <-
rbind(
st_centroid(alltracts)[buffer,] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "TOD"),
st_centroid(alltracts)[buffer, op = st_disjoint] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "Non-TOD")) %>%
mutate(MedRent.inf = ifelse(year == "2012", medcontractrent * 1.31,medcontractrent),
MedHHinc.inf = ifelse(year == "2012", medHHinc * 1.31,medHHinc ),
agg_cont_rent.inf= ifelse(year == "2012", agg_cont_rent * 1.31,agg_cont_rent)) %>%
mutate_all(function(x) ifelse(is.nan(x), NA, x))
alltracts.group <-
rbind(
st_centroid(alltracts)[buffer,] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "TOD"),
st_centroid(alltracts)[buffer, op = st_disjoint] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "Non-TOD")) %>%
mutate(MedRent.inf = ifelse(year == "2012", medcontractrent * 1.31,medcontractrent),
MedHHinc.inf = ifelse(year == "2012", medHHinc * 1.31,medHHinc ),
agg_cont_rent.inf= ifelse(year == "2012", agg_cont_rent * 1.31,agg_cont_rent)) %>%
alltracts.group[alltracts.group == "NaN"] <- NA
alltracts.group <-
rbind(
st_centroid(alltracts)[buffer,] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "TOD"),
st_centroid(alltracts)[buffer, op = st_disjoint] %>%
st_drop_geometry() %>%
left_join(alltracts) %>%
st_sf() %>%
mutate(TOD = "Non-TOD")) %>%
mutate(MedRent.inf = ifelse(year == "2012", medcontractrent * 1.31,medcontractrent),
MedHHinc.inf = ifelse(year == "2012", medHHinc * 1.31,medHHinc ),
agg_cont_rent.inf= ifelse(year == "2012", agg_cont_rent * 1.31,agg_cont_rent))
alltracts.group[alltracts.group == "NaN"] <- NA
alltracts.group$percpoorHH[alltracts.group$percpoorHH == "NaN"] <- NA
ggplot() +
geom_sf(data = st_union(alltracts.group %>% filter(year==2012 )), fill='grey92',color= 'grey80')+
# geom_sf(data = st_union(alltracts.group %>% filter(year==2012 )), fill=NA, color= 'grey70',lwd=1.5)+
geom_sf(data= (alltracts.group %>%  filter(year==2012 ,TOD=='TOD')) , aes(fill= cut(totpop, quantile(alltracts.group$totpop[alltracts.group$year==2012]))), color= 'grey80' ,alpha=0.8)+
scale_fill_manual(values= flatblues5,
labels= c(2520.75, 3447.50, 4617.00, 9120.00),
name = "Total\nPopluation\n(Quintile Breaks)"
)+
geom_sf(data = stations_poprent %>% filter(year==2012), aes(size= totpop),pch=21,alpha= 0.7, fill= 'grey10',color='grey10')+
scale_size_continuous(range = c(0.05,5), name= 'Total\nPopulation')+
scale_y_continuous(limits = c(42.3, 42.40 ))+
scale_x_continuous(limits = c(-71.17, -70.980 ))+
theme_void()+
theme(panel.background = element_rect(fill='grey97',color = NA),
# panel.border = element_rect(fill =NA, color = 'grey20')
)+
labs(title = "Total Population", subtitle = "Boston 2012")
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "medHHinc"),name= 'Median Household Income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
Income_facet_plot <- multiples%>% filter(Variable== 'Percentage_households_below_poverty_line'
) %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_plot <- multiples%>% filter(Variable== 'Percentage_households_below_poverty_line'
) %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(percpoorHH)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "percpoorHH"),name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
qBr(alltracts.group, "percpoorHH")
# labels = qBr(alltracts.group, "percpoorHH"),
name= 'Percentage of Households below Poverty Line')+
# labels = qBr(alltracts.group, "percpoorHH"),
name= 'Percentage of Households below Poverty Line')+
Income_facet_map <- alltracts.group %>%
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=percpoorhh, color = NA, alpha = 0.75)) +
scale_fill_manual(
breaks = c(0.25,0.50,0.75,100),
values = flatblues5,
# labels = qBr(alltracts.group, "percpoorHH"),
name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=percpoorhh, color = NA, alpha = 0.75)) +
scale_fill_manual(
breaks = c(0.25,0.50,0.75,100),
values = flatblues5,
# labels = qBr(alltracts.group, "percpoorHH"),
name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=percpoorHH, color = NA, alpha = 0.75)) +
scale_fill_manual(
breaks = c(0.25,0.50,0.75,100),
values = flatblues5,
# labels = qBr(alltracts.group, "percpoorHH"),
name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(percpoorHH)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "percpoorHH"),name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
q5(alltracts.group$percpoorHH)
qBr(alltracts.group$percpoorHH)
qBr(alltracts.group$percpoorHH)
qBr(alltracts.group,'percpoorHH')
qBr(alltracts.group,'percpoorHH',rnd = F)
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(percpoorHH)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatblues5,
labels = qBr(alltracts.group, "percpoorHH",rnd = F),name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(percpoorHH)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatreds5,
labels = qBr(alltracts.group, "percpoorHH",rnd = F),name= 'Percentage of Households below Poverty Line')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Percentage of Poor households across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medGRrentpercHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatreds5,
labels = qBr(alltracts.group, "medGRrentpercHHinc",rnd = F),name= 'Median Contract Rent as percentage of total household income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
Income_facet_plot <- multiples%>% filter(Variable== 'Median_contract_rent_percent_HHinc'
) %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medGRrentpercHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatreds5,
labels = qBr(alltracts.group, "medGRrentpercHHinc",rnd = F),name= 'Median Contract Rent as percentage of total household income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Contract Rent as percentage of total household income across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_plot <- multiples%>% filter(Variable== 'Median_contract_rent_percent_HHinc'
) %>%
ggplot(aes(TOD, Value, fill = TOD)) +
geom_bar(stat = "identity", position = "dodge") +
geom_text(aes(label= round(Value, 2)), angle=90, vjust=5, color='white')+
facet_wrap(~year, scales = "fixed", ncol=2) +
scale_fill_manual(values = c("grey60", "grey20")) +
theme_minimal()+
theme(legend.position="none", axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medGRrentpercHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatreds5,
labels = qBr(alltracts.group, "medGRrentpercHHinc",rnd = F),name= 'Median Contract Rent as percentage of total household income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
library(gridExtra)
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Contract Rent as percentage of total household income across TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Contract Rent as percentage of total household income \nacross TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Contract Rent as percentage of total household income\nacross TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
Income_facet_map <- alltracts.group %>%
ggplot() +
geom_sf(aes(fill=q5(medGRrentpercHHinc)), color = NA, alpha = 0.75) +
scale_fill_manual(values = flatreds5,
labels = qBr(alltracts.group, "medGRrentpercHHinc",rnd = F),name= 'Median Contract Rent \nas percentage of total household income')+
geom_sf(data= tod,fill=NA,color='grey30',lwd=1)+
facet_wrap(~year, scales = "fixed", ncol=2) +
# labs(title = "Median Income across TOD and non- TOD spaces from 2012 to 2022") +
# scale_x_continuous(limits = c(2002,2032 ), breaks = c(2012,2022))+
theme_void()+
theme(legend.position="bottom")
grid.arrange(Income_facet_map, Income_facet_plot,
top = "Median Contract Rent as percentage of total household income\nacross TOD and non- TOD spaces from 2012 to 2022",
layout_matrix = cbind(c(NA,2,2,2,NA),
c(1,1,1,1,1),
c(1,1,1,1,1),
c(1,1,1,1,1)
))
knitr::opts_chunk$set(echo = TRUE)
setwd("C:/Users/xianl/OneDrive - PennO365/Penn Courses/Javascript/Course Materials/story-map-project/Vibes Story Map/data-main")
library(sf)
emotions <- st_read(
'prague-emo.gpkg'
)
emotions <- st_read(
'prague-emo.gpkg'
) %>% st_transform('EPSG:5514')
library(dbscan)
library(sf)
library(tmap)
library(spatstat)
library(terra)
library(dbscan)
library(spatstat)
library(spatstat)
window = as.owin(emotions)
install.packages('spatialEco
)
install.packages('spatialEco')
install.packages('spatialEco')
library('spatialEco')
only_inside = FALSE
emotionsgrid <- create_grid_hexagonal(
emotions,
cell_size=100,
side_offset = 0,
only_inside = FALSE)
library('spatialEco')
library(spatialEco)
emotionsgrid <- create_grid_hexagonal(
emotions,
cell_size=100,
side_offset = 0,
only_inside = FALSE)
emotions.kde <- emotions %>% sf.kde(,ref=emotions)
emotions.kde <- emotions %>% sf.kde()
emotions.kde
plot(emotions.kde)
View(emotions.kde)
View(emotions.kde)
View(emotions)
Joy <-emotions %>% filter(question== c(1,2,15,19,20,21,40,44))
View(emotions)
Joy <-emotions %>% filter(question%in% c(1,2,15,19,20,21,40,44))
emotions %>% filter(question%in% c(1,2,15,19,20,21,40,44))
emotions[emotions$question %in% c 1,2,15,19,20,21,40,44)),]
emotions[emotions$question %in% c (1,2,15,19,20,21,40,44)),]
emotions[emotions$question %in% c (1,2,15,19,20,21,40,44),]
happy <- emotions[emotions$question %in% c (1,2,15,19,20,21,40,44),]
qtm(happy)
tmap_mode('view')
qtm(happy)
st_crs(emotions)
happy.kde <- happy %>% sf.kde(bw=100)
plot(emotions.kde)
qtm(happy.kde)
happy.kde <- happy %>% sf.kde(bw=10)
qtm(happy.kde)
happy.kde <- happy %>% sf.kde(bw=1000)
happy.kde <- happy %>% sf.kde(bw=1000)
qtm(happy.kde)
happy.kde <- happy %>% sf.kde(bw=1500)
qtm(happy.kde)
happy.kde <- happy %>% sf.kde(bw=1500, res=50)
View(happy.kde)
qtm(happy.kde)
View(happy.kde)
